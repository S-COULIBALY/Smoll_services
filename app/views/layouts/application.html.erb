<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta description et title servent au bon référencement sur google donc apporté une attention particulière-->
    <title>Smoll</title>
    <meta name="description" content="Vos petits déménagements, débarras et ménages à petits prix" />

    <!-- Meta données google, facebook & twitter-->
    <%= render 'shared/meta_data' %>

    <%= csrf_meta_tags %>
    <%= action_cable_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all' %>

    <!-- Boostrap V4-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

    <!-- Notre propre css après Boostrap -->
    <%= stylesheet_link_tag 'application_smoll', media: 'all' %>
  </head>

  <body>
    <div class="vertical-spacer"></div>

    <%= render 'shared/navbar' %>
    <%= render 'shared/flashes' %>

    <%= yield %>

    <%= render 'shared/footer' %>

    <%= javascript_include_tag 'application' %>
    <!-- google-analytics -->
    <%= render 'shared/google_analytics' %>
    <!-- google Google Places API Web Service -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnPFj4dS4EObeASjeDfmBRIlljcCcJNRg&libraries=places"></script>

    <script>
      function initializeAutocomplete(id) {
        var element = document.getElementById(id);

    //    var options = {
    //    types: ['(address)'],
    //    componentRestrictions: {country: 'fr'}
    //  };

        if (element) {
             var autocomplete = new google.maps.places.Autocomplete(element, { types: ['geocode'] });
             google.maps.event.addListener(autocomplete, 'place_changed', onPlaceChanged);
           }
      }

      function onPlaceChanged() {
        var place = this.getPlace();

        // console.log(place);  // Uncomment this line to view the full object returned by Google API.

        for (var i in place.address_components) {
          var component = place.address_components[i];
          for (var j in component.types) {  // Some types are ["country", "political"]
            var type_element = document.getElementById(component.types[j]);
            if (type_element) {
              type_element.value = component.long_name;
            }
          }
        }
      }

      google.maps.event.addDomListener(window, 'load', function() {
        initializeAutocomplete("relocation_locations_attributes_0_address");
        initializeAutocomplete("relocation_locations_attributes_1_address");
      });

      // Le code suivant limite les résultats de recherche aux villes situées en France.

      // var input = document.getElementById("relocation_locations_attributes_0_address");
      // var options = {
      //  types: ['(cities)'],
      //  componentRestrictions: {country: 'fr'}
     // };

     // autocomplete = new google.maps.places.Autocomplete(element, options);

    </script>

     <!-- Custom JS code to bind to Autocomplete API
      <script type="text/javascript" src="google_place_autocomplete_api.js"></script>  -->

  </body>
</html>


<!-- id_1="relocation_locations_attributes_0_address"
id_2="relocation_locations_attributes_1_address" -->
